<html>
	<head>
		<style>
			html {
			background-color: white;
			color: black;
			font-family: sans-serif;
			}
			
			table, th, td {
			border: 1px solid black;
			border-collapse: collapse;
			}
			
			span.NoLineBreak {
				white-space: nowrap;
			}
		</style>
	</head>
<body>

Enter <kbd>https://www.uchinokomato.me/user/show/&lt;UserIDNumber&gt;?page=&lt;PageNumber&gt;</kbd> or <kbd>https://www.uchinokomato.me/&lt;UserName&gt;?page=&lt;PageNumber&gt;</kbd><br><br>

Make sure only 1 URL per line!<br><br>
<textarea id="ListOfUrls" cols="100" rows="25" oninput="GeneratePageNumber()"></textarea><br>
<span id="Output"></span>


<script>
	function GeneratePageNumber() {
		var UserEnteredURLlist = document.getElementById("ListOfUrls").value
		var UserEnteredURLArray = UserEnteredURLlist.split('\n')
		var Output = ""
		
		//Get valid URL and NULL out the invalid ones.
			var ValidUchinokomatoUserHomePage = /^https:\/\/www.uchinokomato.me\/user\/show\/\d+$/
			var ValidUchinokomatoUserHomePage2 = /^https:\/\/www.uchinokomato.me\/[A-Za-z0-9_\-]+$/
			var ValidUchinokomatoUserPageURLFormat = /^https:\/\/www.uchinokomato.me\/user\/show\/\d+\?page=\d+$/
			var ValidUchinokomatoUserPageURLFormat2 = /^https:\/\/www.uchinokomato.me\/[A-Za-z0-9_\-]+\?page=\d+$/
			var UserEnteredURLArrayIndex = 0
			var ValidURL = false
			while (UserEnteredURLArrayIndex < UserEnteredURLArray.length) {
				//Append ?page=1 for first page without that.
					if ((ValidUchinokomatoUserHomePage.test(UserEnteredURLArray[UserEnteredURLArrayIndex]) == true)||(ValidUchinokomatoUserHomePage2.test(UserEnteredURLArray[UserEnteredURLArrayIndex]) == true)) {
						UserEnteredURLArray[UserEnteredURLArrayIndex] += "?page=1"
					}
				//Remove invalid URLs
					ValidURL = false
					if (((ValidUchinokomatoUserPageURLFormat.test(UserEnteredURLArray[UserEnteredURLArrayIndex])) == true)||((ValidUchinokomatoUserPageURLFormat2.test(UserEnteredURLArray[UserEnteredURLArrayIndex])) == true)) {
						ValidURL = true
					}
					
					if (ValidURL == false) {
						UserEnteredURLArray[UserEnteredURLArrayIndex] = 'NULL'
					}
				//Next
					UserEnteredURLArrayIndex++
			}
		//Check to make sure not all elements in the array are NULL (not a single valid URL exists)
			var NoValidURLExists = false
			var IsNULL = (CurrentValue) => CurrentValue == 'NULL'
			if (UserEnteredURLArray.every(IsNULL) == true) {
				NoValidURLExists = true
			}
		if (NoValidURLExists == false) {
			//Find the largest (or last) page number of each unique user
			//1. Obtain the URL besides the page number. This is needed in case an identical URL but with different page number to replace the URL with a higher page number.
			//2. With one URL_NoPageNumb in hand, compare with all the others. Everytime you find a similar URL with a higher page number, replace the one in hand with that larger number, otherwise
			//   check the next URL that can exceed the one in hand.
			//3. Once all the URLs are checked
				var CompareURL1 = ""
				var CompareURL1_PageNumPos = 0
				var CompareURL1_UserHomePage = ""
				var CompareURL1_PageDigitPos = 0
				var CompareURL1_PageNumber = 1
				var CompareURL2 = ""
				var IndexCompare = 0
				var IndexComparand = 1
				
				var OutputArrayIndex = 0 //Should only increase everytime the output array is written.
				var OutputArray = new Array(10000).fill('EMPTY')
				var OutputArrayLastPageNumb = new Array(10000).fill(0)
				
				while (IndexCompare < UserEnteredURLArray.length) {
					//URL1
					if (UserEnteredURLArray[IndexCompare] != 'NULL') {
						//Setup comparend position
							IndexComparand = IndexCompare + 1
							//Extract the URL besides the ?page=x
								CompareURL1 = UserEnteredURLArray[IndexCompare]
								CompareURL1_PageNumPos = CompareURL1.search(/\?page=\d+$/)
								CompareURL1_UserHomePage = CompareURL1.substring(0, CompareURL1_PageNumPos)
							//Extract page number just in case there exist only one URL with that number.
								CompareURL1_PageDigitPos = CompareURL1.search(/\d+$/)
								CompareURL1_PageNumber = parseInt(CompareURL1.substring(CompareURL1_PageDigitPos), 10)
						
							//Now we have the complete information. Now lets get the second URL...
								if ((IndexComparand < UserEnteredURLArray.length)) {
									while (IndexComparand < UserEnteredURLArray.length) {
										//We have a contester, but we gotta check if the URL matches first.
											if (UserEnteredURLArray[IndexComparand] != 'NULL') {
												//Extract the URL besides the ?page=x
													CompareURL2 = UserEnteredURLArray[IndexComparand]
													CompareURL2_PageNumPos = CompareURL2.search(/\?page=\d+$/)
													CompareURL2_UserHomePage = CompareURL2.substring(0, CompareURL2_PageNumPos)
												//Extract page number just in case there exist only one URL with that number.
													CompareURL2_PageDigitPos = CompareURL2.search(/\d+$/)
													CompareURL2_PageNumber = parseInt(CompareURL2.substring(CompareURL2_PageDigitPos), 10)
												//replace if bigger number is secondary
													if (CompareURL1_UserHomePage == CompareURL2_UserHomePage) {
														if (CompareURL2_PageNumber > CompareURL1_PageNumber) {
															//Dethrone the new largest number in hand
																CompareURL1_PageNumber = CompareURL2_PageNumber
														}
														//No need to compare again
															UserEnteredURLArray[IndexComparand] = 'NULL'
													}
											}
										//Next matching userpage
											IndexComparand++
									}
								}
						//Add champion to the list
							OutputArray[OutputArrayIndex] = CompareURL1_UserHomePage + "?page=" + CompareURL1_PageNumber.toString(10)
							OutputArrayLastPageNumb[OutputArrayIndex] = CompareURL1_PageNumber
							OutputArrayIndex++
							UserEnteredURLArray[IndexCompare] = 'NULL'
					}
					//We've searched all of a specific HighestUserPageURL, lets go to a different user and cross the done ones out.
						IndexCompare++
				}
			//Now get the highest page number URLs into the output string
				Output += "Highest usepage page number(s):"
				Output += "<table><tr><td><pre>"
				var NumberOfUniqueUsers = 0
				while (OutputArray[NumberOfUniqueUsers] != 'EMPTY') {
					Output += OutputArray[NumberOfUniqueUsers] + "<br>"
					
					NumberOfUniqueUsers++
				}
				Output += "</pre></td></tr></table>"
			//Display a list of the last page numbers of the user's gallery
				Output += "All page number URLs:"
				Output += "<table><tr><td><pre>"
				var UniqueUserpageIndex = 0
				var PageCount = 0
				var UserHomePageWithPageNumb = ""
				while (UniqueUserpageIndex < NumberOfUniqueUsers) {
					PageCount = 0
					while (PageCount < OutputArrayLastPageNumb[UniqueUserpageIndex]) {
						//Get Userpage URL
							CompareURL1 = OutputArray[UniqueUserpageIndex]
							CompareURL1_PageNumPos = CompareURL1.search(/\?page=\d+$/)
							CompareURL1_UserHomePage = CompareURL1.substring(0, CompareURL1_PageNumPos)
						//Add page number
							if (PageCount != 0) {
								UserHomePageWithPageNumb = CompareURL1_UserHomePage + "?page=" + (PageCount + 1).toString(10) + "<br>"
							} else {
								UserHomePageWithPageNumb = CompareURL1_UserHomePage + "<br>"
							}
						//Write to output string
							Output += UserHomePageWithPageNumb
						//Next page number
							PageCount++
					}
					//Next unique user
						UniqueUserpageIndex++
				}
				Output += "</pre></td></tr></table>"
		}
		//Display Output in the HTML
			document.getElementById("Output").innerHTML = Output
	}
</script>